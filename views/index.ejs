<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ChatApp</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/main2.css">
  </head>
  <body>
    <div >
    </div>
    <div >
      <br>
     <h3> Hi <%= name %> !</h3><a href="/logout">Logout</a><br>
     <h5>Send new message</h5>
     <form action="/send" method="post",id="myForm">
      <div class="mb-3">
        <input type="text" class="form-control" style="display: block;" id="NAME1"  name="name">
      </div>
      <div class="mb-3">
        <input type="email" class="form-control" style="display: block;" id="EMAIL1"  name="email">
      </div>
      <div class="mb-3">
        <label for="exampleFormControlInput1" class="form-label">Email</label>
        <input type="email" class="form-control" id="Email" required name="givenEmail" autofocus>
      </div>
      <div class="mb-3">
        <input type="text" class="form-control" id="title"style="display: none;" name="givenTitle" autofocus>
      </div>
      <div class="mb-3">
        <label for="exampleFormControlTextarea1" class="form-label">Message</label>
        <textarea class="form-control" name="givenMessage" id="message" required rows="3"></textarea>
      </div>
     <button type="submit" class="btn btn-primary">Send</button>
     </form>
     <br>
     <h5>Your Conversation</h5><br>
     <div class="container">
      <% let i=0 %>
      <div class="accordion" id="accordionExample">
      <% friends.forEach(element => { %>
        <form action="/message" method="post">
          <div class="mb-3">
            <input type="text" value= <%= name %>  class="form-control" style="display: block;" class="NAME2"  name="myName">
          </div>
          <div class="mb-3">
            <input type="email" value=<%= name %> class="form-control" style="display: block;" class="EMAIL2"  name="myEmail">
          </div>
          <input type="text" style="display: none;" name="senderEmail" value = <%= element.Email %>>
       <button class="btn primary" id="friends"><%= element.Email %><br> </button>
        </form>
     <%  }) %>
    </div>
     </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script>
    let name1=document.getElementById('NAME1');
    let email1=document.getElementById('EMAIL1');
    let name2=document.getElementsByClassName('NAME2');
    let email2=document.getElementsByClassName('EMAIL2');
    name1.value=localStorage.getItem('name');
    email1.value=localStorage.getItem('email');
    name2.value=localStorage.getItem('name');
    email2.value=localStorage.getItem('email');
    const name=localStorage.getItem('name');
    const email=localStorage.getItem('email');
    </script>
  </body>
</html>